@using Newtonsoft.Json
@model NETCoreExperimentalWebApp.Models.AccountViewModels.LoginViewModel
@{
    ViewData["Title"] = "Log in";
}

<h2 class="ui header">@ViewData["Title"]</h2>
<div>
    <form class="ui form" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post">
        <div class="ui error message"></div>
        <div class="field">
            <label asp-for="Username"></label>
            <input asp-for="Username"/>
        </div>
        <div class="field">
            <label asp-for="Password"></label>
            <input asp-for="Password"/>
        </div>
        <div class="field">
            <div class="ui checkbox">
                <input asp-for="RememberMe"/>
                <label asp-for="RememberMe"></label>
            </div>
        </div>
        <div class="field">
            <button type="submit" class="ui button">Log in</button>
        </div>
    </form>
</div>
<div class="ui divider"></div>
<div>
    <a asp-action="Register" asp-route-returnurl="@ViewData["ReturnUrl"]">Register as a new user?</a>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            $('.ui.form')
                .form({
                    fields: {
                        Password: 'empty',
                        Username: 'empty'
                    }
                });
            var obj = @Html.Raw(JsonConvert.SerializeObject(Model));
            if (obj !== null) {
                console.log("error");
                $('.form .error.message').html('Login failed').show();
            };
        });
    </script>
}